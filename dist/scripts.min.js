let pokemonRepository=function(){let e=[],t=document.querySelector(".pokemon-list"),n=document.querySelector(".search"),i=document.querySelector(".modal-dialog");function a(e){let t=document.createElement("div");t.classList.add("text-center");let n=document.createElement("div");n.classList.add("spinner-border"),n.setAttribute("role","status");let i=document.createElement("span");i.classList.add("sr-only"),i.innerText="Loading...",n.appendChild(i),t.appendChild(n),e.appendChild(t)}function o(e){e.removeChild(e.lastChild)}function r(t){e.push(t)}function l(){return e}function s(e){c(e).then(function(){let n=document.createElement("li");n.classList.add("col");let i=document.createElement("button"),a=document.createElement("h2");i.appendChild(a),a.innerText=e.name.charAt(0).toUpperCase()+e.name.slice(1),i.classList.add("pokemon-button"),i.setAttribute("data-toggle","modal"),i.setAttribute("data-target",".modal");let o=document.createElement("img");o.src=e.frontImageUrl,i.appendChild(o),n.appendChild(i),t.appendChild(n),i.addEventListener("click",function(){p(e)})})}function d(t){return e.filter(function(e){let n=e.name.toLowerCase(),i=t.toLowerCase();return n.startsWith(i)})}function c(e){let t=document.querySelector(".modal-body");return a(t),fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(n){o(t),e.frontImageUrl=n.sprites.front_default,e.backImageUrl=n.sprites.back_default,e.height=n.height;let i=[];n.types.forEach(function(e){i.push(e.type.name)}),e.types=i.join(", ");let a=[];n.abilities.forEach(function(e){a.push(e.ability.name)}),e.abilities=a.join(", ")}).catch(function(e){o(t),console.error(e)})}function p(e){c(e).then(function(){let t=document.querySelector(".modal-title"),n=document.querySelector(".modal-body");t.innerHTML="",n.innerHTML="";document.querySelector(".modal-title").innerText=e.name.charAt(0).toUpperCase()+e.name.slice(1);let i=document.createElement("img");i.classList.add("modal-img"),i.src=e.frontImageUrl;let a=document.createElement("img");a.classList.add("modal-img"),a.src=e.backImageUrl;let o=document.createElement("div");o.classList.add("modal-text");let r=document.createElement("p");r.innerText="Height: "+e.height/10+" m";let l=document.createElement("p");l.innerText="Types: "+e.types;let s=document.createElement("p");s.innerText="Abilities: "+e.abilities,n.appendChild(i),n.appendChild(a),n.appendChild(o),o.appendChild(r),o.appendChild(l),o.appendChild(s)})}function u(){t.innerHTML=""}function m(){i.classList.add("hidden")}function h(e){let n=document.createElement("p");n.classList.add("error-message"),n.classList.add("col-6"),n.innerText=e,t.appendChild(n)}return n.addEventListener("input",function(){let e=d(n.value);u(),0===e.length?h("Sorry. No Pok\xe9mons found for your search. Check for typos. :)"):e.forEach(s)}),window.addEventListener("keydown",function(e){"Escape"===e.key&&m()}),{showLoadingSpinner:a,hideLoadingSpinner:o,add:r,getAll:l,addListItem:s,loadList:function e(){let t=document.querySelector(".main");return a(t),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){o(t),(pokemonArray=e.results).forEach(function(e){r({name:e.name,detailsUrl:e.url})})}).catch(function(e){o(t),u(),m(),h("There don't seem to be any Pok\xe9mon around. If you are not offline, try again later."),console.error(e)})},loadDetails:c,showDetails:p,filterPokemons:d,removeList:u,hideModal:m,showErrorMessage:h}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});